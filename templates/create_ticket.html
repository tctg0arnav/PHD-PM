<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/e653c7cf97.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='pico.min.css') }}">
    <title>Create Ticket</title>
    <style>
        [data-theme="light"],
        :root:not([data-theme="dark"]) {
            --primary: #640000;
            --primary-hover: #640000;
            --primary-focus: rgba(143, 143, 143, 0.125);
            --primary-inverse: #FFF;
        }

        .primary {
            background-color: #640000;
            border-color: #640000;
            border-radius: 0;
        }

        .primary:hover {
            background-color: #4a0101;
        }

        .secondary {
            background-color: white;
            color: #640000;
            border-color: #640000;
            border-radius: 0;

        }

        .secondary:hover {
            background-color: #f6f6f6;
        }

        .Uploaded {

            margin-bottom: 2%;
        }

        /* for large screens */
        article {
            width: 75vw;

            /* sets the width to 75% of the viewport width */
            margin: 10% auto 0;
            /* centers the article element horizontally and adds 10% margin to the top */
        }

        .article {
            padding-bottom: 0;
            margin-bottom: 5%;
            box-shadow: none;
            border: 1.5px solid #3d3d3d;
            border-radius: 0;
        }

        .header {
            background-color: #D9D9D9;
            border-radius: 0;
        }

        .header h1 {
            color: #640000;
        }

        .nav-container {
            background-color: #D9D9D9;
            box-shadow: 0 2px 8px grey;
        }

        .nav {
            width: 75vw;
            margin: 0 auto;
            background-color: #D9D9D9;
            color: #640000;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 5%;
            font-family: 'Times New Roman', Times, serif;
            font-size: 30px;

        }

        .nav img {
            height: 70px;

        }

        .modal {
            border: 1.5px solid #640000;
            border-radius: 0;
        }

        .submit {
            margin-bottom: 0 !important;
        }

        input::file-selector-button {

            border-radius: 2px !important;
        }

        .delete-supervisor,
        .delete-committee-member {
            text-align: right;
        }

        /* for medium-sized screens */
        @media screen and (max-width: 1024px) {
            article {
                width: 90vw;
                /* sets the width to 90% of the viewport width */
                margin: 10% auto 0;
                /* centers the article element horizontally and adds 10% margin to the top */
            }

            .nav {
                width: 90vw;
            }
        }

        /* for small screens */
        @media screen and (max-width: 768px) {
            article {
                width: 95vw;
                /* sets the width to 100% of the viewport width */
                margin: 10% auto 0;
                /* centers the article element horizontally and adds 10% margin to the top */
            }

            .nav {
                width: 95vw;
            }

        }

        @media screen and (max-width: 566px) {

            .nav {
                font-size: 24px;
            }
        }

        @media screen and (max-width: 470px) {
            .nav img {
                height: 55px;

            }

            .nav {
                font-size: 20px;
            }
        }

        @media screen and (max-width: 494px) {
            hgroup h1 {
                font-size: 22px;
            }

        }

        @media screen and (max-width: 388px) {

            .nav {
                font-size: 18px;
            }
        }
    </style>
</head>

<body>
    <div class="nav-container">
        <div class="nav">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/tietlogo.png') }}" alt="logo">
            </div>
            <div class="brand">
                <strong>PhD Progress Monitoring System</strong>
            </div>
        </div>
    </div>
    <article class="article">
        <header class="header">
            <hgroup>
                <h1>Thesis Submission </h1>
                <h2>Submit your PhD Thesis here.</h2>
            </hgroup>
        </header>
        <main class="container">
            <form action="/create_ticket" method="post" enctype="multipart/form-data">
                <section class="student-details">
                    <h3>Student Details</h3>
                    <div class="grid">
                        <div>
                            <label for="student_name">Student Name<sup style=" color: #ff0000;">*</sup></label>
                            <input type="text" name="student_name" id="student_name" required>
                        </div>
                    </div>
                    <div>
                        <label for="student_email">Student Email<sup style=" color: #ff0000;">*</sup></label>
                        <input type="email" name="student_email" id="student_email" required>
                    </div>
                    <div class="grid">
                        <div>
                            <label for="Roll_No">Roll No.<sup style=" color: #ff0000;">*</sup></label>
                            <input type="text" name="Roll_No" id="Roll_No" required>
                        </div>
                        <div>
                            <label for="Au">Academic Unit:<sup style=" color: #ff0000;">*</sup></label>
                            <select name="Au" id="Au" required>
                                <option value="1">L. M. Thapar School of Management</option>
                                <option value="2">School of Chemistry & Biochemistry (DST-FIST Sponsored)</option>
                                <option value="3">School of Energy and Environment (DST-FIST Sponsered)</option>
                                <option value="4">School of Humanities & Social Sciences</option>
                                <option value="5">School of Mathematics</option>
                                <option value="6">School of Physics & Materials Science</option>
                                <option value="7">Thapar School of Liberal Arts & Sciences (TSLAS)</option>
                                <option value="8">Basic & Engineering Sciences (Dera Bassi Campus)</option>
                                <option value="9">Chemical Engineering</option>
                                <option value="10">Civil Engineering</option>
                                <option value="11">Computer Science & Engineering</option>
                                <option value="12">Department of Biotechnology</option>
                                <option value="13">Distance Education (DDE)</option>
                                <option value="14">Electrical & Instrumentation Engineering</option>
                                <option value="15">Electronics & Communication Engineering</option>
                                <option value="16">Mechanical Engineering Department</option>
                            </select>
                        </div>
                    </div>
                </section>
                <section class="project-details">
                    <h3>Thesis Details</h3>
                    <label for="Project_Title">Thesis Title<sup style=" color: #ff0000;">*</sup></label>
                    <input type="text" name="Project_Title" id="Project_Title" required>
                    <div class="grid">
                        <div>
                            <label for="Date_Of_Progress_Presentation">Date of Progress Presentation<sup
                                    style=" color: #ff0000;">*</sup></label>
                            <input type="date" name="Date_Of_Progress_Presentation" id="Date_Of_Progress_Presentation"
                                required>
                        </div>
                        <div>
                            <label for="Date_Of_IRB">Date of IRB<sup style=" color: #ff0000;">*</sup></label>
                            <input type="date" name="Date_Of_IRB" id="Date_Of_IRB" required>
                        </div>
                        <div>
                            <label for="Gate">GRF/TA<sup style=" color: #ff0000;">*</sup></label>
                            <details id="Gate" role="list">
                                <summary aria-haspopup="listbox" id="Gate_bool">Select from Dropdown</summary>
                                <ul role="listbox">
                                    <li>
                                        <label for="Yes">
                                            <input type="radio" name="Gate" value="Yes" onchange="updateSummaryText()">
                                            Yes
                                        </label>
                                    </li>
                                    <li>
                                        <label for="No">
                                            <input type="radio" name="Gate" value="No" onchange="updateSummaryText()">
                                            No
                                        </label>
                                    </li>
                                </ul>
                            </details>
                        </div>
                    </div>
                </section>
                <!-- <section class="Supervisors">
                    <h3>Supervisors</h3>
                    <div id="supervisors-container">
                        <div class="supervisor">
                            <input type="text" hidden value="" name="supervisor-name">
                            <input type="text" hidden value="" name="supervisor-email">
                            <div class="grid">
                            <div>
                                <label for="supervisor_name_1">Supervisor 1 Name<sup
                                        style=" color: #ff0000;">*</sup></label>
                                <input type="text" name="supervisor_name[]" id="supervisor_name_1" required>
                            </div>
                            <div>
                                <label for="supervisor_email_1">Supervisor 1 Email<sup
                                        style=" color: #ff0000;">*</sup></label>
                                <input type="email" name="supervisor_email[]" id="supervisor_email_1" required>
                            </div>
                        </div>
                            
                        </div>
                    </div>
                    <div class="add-supervisor">
                        <a href="#" onclick="addSupervisor(); return false;"> <i class="fa-sharp fa-solid fa-plus"></i> Add Supervisor</a>
                    </div>
                </section>

                <script>
                    let supervisorCount = 1;

                    function addSupervisor() {
                        supervisorCount++;
                        const container = document.getElementById('supervisors-container');
                        const div = document.createElement('div');
                        div.className = 'supervisor';
                        div.innerHTML = `
                        <div class="grid">    
                        <div>
                                <label for="supervisor_name_${supervisorCount}">Supervisor ${supervisorCount} Name<sup style=" color: #ff0000;">*</sup></label>
                                <input type="text" name="supervisor_name[]" id="supervisor_name_${supervisorCount}" required>
                            </div>
                            <div>
                                <label for="supervisor_email_${supervisorCount}">Supervisor ${supervisorCount} Email<sup style=" color: #ff0000;">*</sup></label>
                                <input type="email" name="supervisor_email[]" id="supervisor_email_${supervisorCount}" required>
                            </div> 
                        </div> 
                            <div class="delete-supervisor">
                                <a href="#" onclick="deleteSupervisor(this.parentNode.parentNode); return false;">Delete</a>
                            </div>
                        `;
                        container.appendChild(div);
                    }

                    function deleteSupervisor(supervisorDiv) {
                        supervisorCount--;
                        supervisorDiv.remove();
                    } -->
                <!-- function combineSupervisors() {
                        let supervisorNames = "";
                        let supervisorEmails = "";
                        const nameInputs = document.getElementsByName("supervisor_name[]");
                        const emailInputs = document.getElementsByName("supervisor_email[]");
                        for (let i = 0; i < nameInputs.length; i++) {
                            supervisorNames += nameInputs[i].value + ";";
                            supervisorEmails += emailInputs[i].value + ";";
                        }
                        document.getElementById("supervisor_name").value = supervisorNames.slice(0, -1);
                        document.getElementById("supervisor_email").value = supervisorEmails.slice(0, -1);
                    }

                    document.addEventListener("submit", combineSupervisors);
                </script> -->


                <section class="Supervisors">
                    <h3>Supervisors</h3>
                    <div id="supervisors-container">
                        <div class="supervisor">
                            <div class="grid">
                                <div>
                                    <label for="supervisor_name_1">Supervisor 1 Name<sup
                                            style=" color: #ff0000;">*</sup></label>
                                    <input type="text" name="supervisor_name_1" id="supervisor_name_1" required>
                                </div>
                                <div>
                                    <label for="supervisor_email_1">Supervisor 1 Email<sup
                                            style=" color: #ff0000;">*</sup></label>
                                    <input type="email" name="supervisor_email_1" id="supervisor_email_1" required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="add-supervisor">
                        <a href="#" onclick="addSupervisor(); return false;"> <i class="fa-sharp fa-solid fa-plus"></i>
                            Add Supervisor</a>
                    </div>
                </section>

                <script>
                    let supervisorCount = 1;

                    function addSupervisor() {
                        supervisorCount++;
                        const supervisorsContainer = document.getElementById("supervisors-container");
                        const newSupervisor = document.createElement("div");
                        newSupervisor.classList.add("supervisor");
                        newSupervisor.innerHTML = `
                        <div class="grid">
                          <div>
                            <label for="supervisor_name_${supervisorCount}">Supervisor ${supervisorCount} Name <sup style=" color: #ff0000;">*</sup></label>
                            <input type="text" name="supervisor_name_${supervisorCount}" id="supervisor_name_${supervisorCount}" required>
                          </div>
                          <div>
                            <label for="supervisor_email_${supervisorCount}">Supervisor ${supervisorCount} Email <sup style=" color: #ff0000;">*</sup></label>
                            <input type="email" name="supervisor_email_${supervisorCount}" id="supervisor_email_${supervisorCount}" required>
                          </div>
                        </div>`;
                        const deleteButton = document.createElement("div");
                        deleteButton.classList.add("delete-supervisor");
                        deleteButton.innerHTML = `<a href="#" onclick="deleteSupervisor(this.parentNode.parentNode); return false;"><i class="fa-solid fa-trash"></i></a>`;
                        newSupervisor.appendChild(deleteButton);
                        supervisorsContainer.appendChild(newSupervisor);
                    }

                    function deleteSupervisor(element) {
                        element.remove();
                        updateSupervisors();
                    }

                    function updateSupervisors() {
                        const supervisors = document.querySelectorAll(".supervisor");
                        supervisors.forEach((supervisor, index) => {
                            const labels = supervisor.querySelectorAll("label");
                            labels[0].innerHTML = `Supervisor ${index + 1} Name<sup style=" color: #ff0000;">*</sup>`;
                            labels[1].innerHTML = `Supervisor ${index + 1} Email<sup style=" color: #ff0000;">*</sup>`;
                            const inputs = supervisor.querySelectorAll("input");
                            inputs[2].id = `supervisor_name_${index + 1}`;
                            inputs[3].id = `supervisor_email_${index + 1}`;
                        });
                        supervisorCount = supervisors.length;
                    }

                    // function combineSupervisors() {
                    //     let supervisorNames = "";
                    //     let supervisorEmails = "";
                    //     const nameInputs = document.getElementsByName("supervisor_name[]");
                    //     const emailInputs = document.getElementsByName("supervisor_email[]");
                    //     for (let i = 0; i < nameInputs.length; i++) {
                    //         supervisorNames += nameInputs[i].value + ";";
                    //         supervisorEmails += emailInputs[i].value + ";";
                    //     }
                    //     document.getElementById("supervisor_name").value = supervisorNames.slice(0, -1);
                    //     document.getElementById("supervisor_email").value = supervisorEmails.slice(0, -1);
                    // }

                    // document.addEventListener("submit", combineSupervisors);
                </script>


                <section class="CommitteeMembers">
                    <input type="text" hidden value="" name="committee-name">
                    <input type="text" hidden value="" name="committee-email">
                    <h3>Committee Members</h3>
                    <div id="committee-members-container">
                        <div class="committee-member">
                            <div class="grid">
                                <div>
                                    <label for="committee_member_name_1">Member 1 Name<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="text" name="committee_member_name_1" id="committee_member_name_1"
                                        required>
                                </div>
                                <div>
                                    <label for="committee_member_email_1">Member 1 Email<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="email" name="committee_member_email_1" id="committee_member_email_1"
                                        required>
                                </div>
                            </div>
                        </div>
                        <div class="committee-member">
                            <div class="grid">
                                <div>
                                    <label for="committee_member_name_2">Member 2 Name<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="text" name="committee_member_name_2" id="committee_member_name_2"
                                        required>
                                </div>
                                <div>
                                    <label for="committee_member_email_2">Member 2 Email<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="email" name="committee_member_email_2" id="committee_member_email_2"
                                        required>
                                </div>
                            </div>
                        </div>
                        <div class="committee-member">
                            <div class="grid">
                                <div>
                                    <label for="committee_member_name_3">Member 3 Name<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="text" name="committee_member_name_3" id="committee_member_name_3"
                                        required>
                                </div>
                                <div>
                                    <label for="committee_member_email_3">Member 3 Email<sup
                                            style="color: #ff0000;">*</sup></label>
                                    <input type="email" name="committee_member_email_3" id="committee_member_email_3"
                                        required>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="add-committee-member">
                        <a href="#" onclick="addCommitteeMember(); return false;"> <i class="fa-sharp fa-solid fa-plus"></i>
                            Add Member</a>
                    </div>
                </section>

                <script>
                    let committeeMemberCount = 3;

                    function addCommitteeMember(event) {
                        committeeMemberCount++;
                        const committeeMembersContainer = document.getElementById("committee-members-container");
                        const newCommitteeMember = document.createElement("div");
                        newCommitteeMember.classList.add("committee-member");
                        newCommitteeMember.innerHTML = `
        <div class="grid">
            <div>
                <label for="committee_member_name_${committeeMemberCount}">Member ${committeeMemberCount} Name<sup style="color: #ff0000;">*</sup></label>
                <input type="text" name="committee_member_name_${committeeMemberCount}" id="committee_member_name_${committeeMemberCount}" required>
            </div>
            <div>
                <label for="committee_member_email_${committeeMemberCount}">Member ${committeeMemberCount} Email<sup style="color: #ff0000;">*</sup></label>
                <input type="email" name="committee_member_email_${committeeMemberCount}" id="committee_member_email_${committeeMemberCount}" required>
            </div>
        </div>`;
                        const deleteButton = document.createElement("div");
                        deleteButton.classList.add("delete-committee-member");
                        deleteButton.innerHTML = `<a href="#" onclick="deleteCommitteeMember(this.parentNode.parentNode); return false;"><i class="fa-solid fa-trash"></i></a>`;
                        newCommitteeMember.appendChild(deleteButton);
                        committeeMembersContainer.appendChild(newCommitteeMember);
                    }

                    function deleteCommitteeMember(element) {
                        element.remove();
                        updateCommitteeMembers();
                    }

                    function updateCommitteeMembers() {
                        const committeeMembers = document.querySelectorAll(".committee-member");
                        committeeMembers.forEach((member, index) => {
                            const labels = member.querySelectorAll("label");
                            labels[0].innerHTML = `Member ${index + 1} Name<sup style="color: #ff0000;">*</sup>`;
                            labels[1].innerHTML = `Member ${index + 1} Email<sup style="color: #ff0000;">*</sup>`;
                            const inputs = member.querySelectorAll("input");
                            inputs[0].id = `committee_member_name_${index + 1}`;
                            inputs[1].id = `committee_member_email_${index + 1}`;
                        });
                        committeeMemberCount = committeeMembers.length;
                    }
                    // function combineCommittee() {
                    //     let committeeNames = "";
                    //     let committeeEmails = "";
                    //     const nameInputs = document.getElementsByName("committee_name[]");
                    //     const emailInputs = document.getElementsByName("committee_email[]");
                    //     for (let i = 0; i < nameInputs.length; i++) {
                    //         committeeNames += nameInputs[i].value + ";";
                    //         committeeEmails += emailInputs[i].value + ";";
                    //     }
                    //     document.getElementById("committee_name").value = committeeNames.slice(0, -1);
                    //     document.getElementById("committee_email").value = committeeEmails.slice(0, -1);
                    // }

                    // document.addEventListener("submit", combineCommittee);
                </script>

                <!-- <script>
                    let committeeMemberCount = 3;

                    function addCommitteeMember(event) {
                        event.preventDefault();
                        committeeMemberCount++;
                        const container = document.getElementById('committee-members-container');
                        const div = document.createElement('div');
                        div.className = 'committee-member';
                        div.innerHTML = `
                        <div class="grid">
                        <div>
                          <label for="committee_member_name_${committeeMemberCount}">Member ${committeeMemberCount} Name<sup style="color: #ff0000;">*</sup></label>
                          <input type="text" name="committee_member_name[]" id="committee_member_name_${committeeMemberCount}" required>
                        </div>
                        <div>
                          <label for="committee_member_email_${committeeMemberCount}">Member ${committeeMemberCount} Email<sup style="color: #ff0000;">*</sup></label>
                          <input type="email" name="committee_member_email[]" id="committee_member_email_${committeeMemberCount}" required>
                        </div>
                        </div>
                        <div class="delete-committee-member">
                          <a href="#" onclick="deleteCommitteeMember(event, this.parentNode.parentNode)">Delete</a>
                        </div>
                      `;
                        container.appendChild(div);
                    }

                    function deleteCommitteeMember(event, committeeMemberDiv) {
                        event.preventDefault();
                        committeeMemberDiv.remove();
                    }
                    function combineCommittee() {
                        let committeeNames = "";
                        let committeeEmails = "";
                        const nameInputs = document.getElementsByName("committee_name[]");
                        const emailInputs = document.getElementsByName("committee_email[]");
                        for (let i = 0; i < nameInputs.length; i++) {
                            committeeNames += nameInputs[i].value + ";";
                            committeeEmails += emailInputs[i].value + ";";
                        }
                        document.getElementById("committee_name").value = committeeNames.slice(0, -1);
                        document.getElementById("committee_email").value = committeeEmails.slice(0, -1);
                    }

                    document.addEventListener("submit", combineCommittee);
                </script> -->

                <label for="file">Upload your file<sup style=" color: #ff0000;">*</sup></label>
                <input class="choose" type="file" name="file_path" id="file">
                <div class="grid">
                    <div>
                        <label for="SCOPUS">Publications:</label>
                        <textarea name="Publications" id="" cols="20" rows="5"
                            placeholder="Enter all Publications"></textarea>
                    </div>
                </div>
                <section class="submit primary">
                    <input class="submit" type="submit" value="Submit" onclick="console.log(document.getElementByID('supervisor_name').value)">
                </section>
            </form>
        </main>
    </article>
    {% if success != '' %}
    <dialog class="container" id="modal-example" open>
        <article class="modal">
            <a href="" aria-label="Close" class="close" data-target="modal-example" onclick="self.close()">
            </a>
            <h3 style="color: #640000;">Success</h3>
            <p>
                {{ success }}
            </p>
            <p>
                You can now close the tab.
            </p>
            <br><br><br>
        </article>
    </dialog>
    {% endif %}
    <script>
        "use strict"; const isOpenClass = "modal-is-open", openingClass = "modal-is-opening", closingClass = "modal-is-closing", animationDuration = 400; let visibleModal = null; const toggleModal = e => { e.preventDefault(); e = document.getElementById(e.currentTarget.getAttribute("data-target")); (void 0 !== e && null != e && isModalOpen(e) ? closeModal : openModal)(e) }, isModalOpen = e => !(!e.hasAttribute("open") || "false" == e.getAttribute("open")), openModal = e => { isScrollbarVisible() && document.documentElement.style.setProperty("--scrollbar-width", getScrollbarWidth() + "px"), document.documentElement.classList.add(isOpenClass, openingClass), setTimeout(() => { visibleModal = e, document.documentElement.classList.remove(openingClass) }, animationDuration), e.setAttribute("open", !0) }, closeModal = e => { visibleModal = null, document.documentElement.classList.add(closingClass), setTimeout(() => { document.documentElement.classList.remove(closingClass, isOpenClass), document.documentElement.style.removeProperty("--scrollbar-width"), e.removeAttribute("open") }, animationDuration) }, getScrollbarWidth = (document.addEventListener("click", e => { null == visibleModal || visibleModal.querySelector("article").contains(e.target) || closeModal(visibleModal) }), document.addEventListener("keydown", e => { "Escape" === e.key && null != visibleModal && closeModal(visibleModal) }), () => { var e = document.createElement("div"), t = (e.style.visibility = "hidden", e.style.overflow = "scroll", e.style.msOverflowStyle = "scrollbar", document.body.appendChild(e), document.createElement("div")), t = (e.appendChild(t), e.offsetWidth - t.offsetWidth); return e.parentNode.removeChild(e), t }), isScrollbarVisible = () => document.body.scrollHeight > screen.height;
    </script>
    <script>
        function updateSummaryText() {
            var gate = document.getElementById("Gate");
            var summary = gate.querySelector("summary");
            var radios = gate.querySelectorAll("input[name='Gate']");
            for (var i = 0; i < radios.length; i++) {
                if (radios[i].checked) {
                    summary.textContent = radios[i].value;
                    break;
                }
            }
        }
    </script>
</body>

</html>